@page "/"

<PageTitle>Pomodoro do homem</PageTitle>

<h1>Você vai estudar, vagabundo. @* @ts *@</h1>
<div>
    <button class="btn btn-primary" @onclick="() => IniciarMinutos(25)">25 min</button>
    <button class="btn btn-primary" @onclick="() => IniciarMinutos(5)">5 min PAUSA</button>
    <button class="btn btn-primary" @onclick="() => IniciarMinutos(50)">50 min LONGA</button>

</div>


<h2>Contador de estudo: @ValorDoContadorSegundos e @MAX_TIME </h2>
<button class="btn btn-primary" @onclick="DiminuirContadorRegressivo" disabled="@TimerAndamento" >Começar</button>
<button class="btn btn-primary" @onclick="PausarContador">Pausar</button>

<HomeHistory></HomeHistory>

Welcome to your new app.

@code {

    private string MAX_TIME = "00:00:00";
    private int ValorDoContadorSegundos = 0;
    private bool TimerAndamento = false;

    private async Task DiminuirContadorRegressivo()
    {
        if (!TimerAndamento)
        {
            TimerAndamento = true;

            while(ValorDoContadorSegundos > 0 && TimerAndamento == true)
            {
                ValorDoContadorSegundos--;
                await Task.Delay(1000);
                TimeSpan ts = TimeSpan.FromSeconds(ValorDoContadorSegundos);

                MAX_TIME = ts.ToString();

                await InvokeAsync(StateHasChanged);
            }
        }

    }

    private void PausarContador()
    {
        TimerAndamento = false;
    }

    private void IniciarMinutos(int tempoMinutos)
    {
        ValorDoContadorSegundos = (tempoMinutos * 60);
        MAX_TIME = tempoMinutos.ToString();

    }


}
